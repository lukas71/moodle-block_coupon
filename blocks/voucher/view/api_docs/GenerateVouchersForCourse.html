<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style type="text/css">
            th { text-align: left;}
            div { margin-bottom: 1em; padding-left: 5pt }
            div.deprecated { border: 1px solid #880000; background-color: #ff8800; font-weight: bold; }
            div.deprecated p { color: #ff0000; font-weight: bold; }
            div.block { border: 1px solid #999999; }
            div.mname { font-size: 20pt; color: #666666; padding-left: 0; }
            div.heading, p.heading { font-size: 16pt; color: #888888; }
            th, td { padding-right: 10pt;}
            p.service { padding-left: 10pt; }
            th:first-letter { text-transform: uppercase; }
table{width:99%}
th.pname{width:20%}
th.ptype{width:10%}
th.popt{width:10%}
th.pdesc{width:59%}
        </style>
    </head>
    <body>
        <div>
            <div><a href="?id=<?php echo $id?>&page=index">Home</a>
            </div>
            <div class="mname">VoucherAPI - GenerateVouchersForCourse</div>
            <div class="block"><p>Generate vouchers for a course.</p></div>
            <p class="heading">Method signature</p><div class="block">GenerateVouchersForCourse(string <i>$email</i>, int <i>$amount</i>, array <i>$courses</i> [, array <i>$groups = false</i> [, bool <i>$generate_single_pdfs = false</i>]])</div>
            <p class="heading">Parameters</p><div class="block"><table><thead><tr><th class="pname" style="font-weight: bold">name</th><th class="ptype">type</th><th class="popt">optional/mandatory</th><th class="pdesc">description</th></tr></thead><tbody><tr nobr="true"><td class="pname">email</td><td class="ptype">string</td><td class="ptop">mandatory</td><td class="pdesc">Email address the vouchers will be sent to.</td></tr><tr nobr="true"><td class="pname">amount</td><td class="ptype">int</td><td class="ptop">mandatory</td><td class="pdesc">Amount of vouchers to be generated.</td></tr><tr nobr="true"><td class="pname">courses</td><td class="ptype">array</td><td class="ptop">mandatory</td><td class="pdesc">Array of IDs of courses the vouchers will be generated for.</td></tr><tr nobr="true"><td class="pname">groups</td><td class="ptype">array</td><td class="ptop">optional</td><td class="pdesc">Array of IDs of all groups the users will be added to after using a Voucher.</td></tr><tr nobr="true"><td class="pname">generate_single_pdfs</td><td class="ptype">boolean</td><td class="ptop">optional</td><td class="pdesc">Will generate one PDF file for each voucher if true.</td></tr></tbody></table></div>
            <p class="heading">Return</p><div class="block"><table><tr><th>type</th><th>description</th></tr><tr><td>boolean</td><td>$result</td></tr></table></div>
            <p class="heading">Example code / usage</p><div class="block"><pre> $url = '<?php echo $CFG->wwwroot?>/blocks/voucher/view/api.php<br />?method=GenerateVouchersForCourse&amount=5&email=info@avetica.nl&courses[0]=2&courses[1]=3&groups[0]=1&groups[1]=2&generate_single_pdfs=1&resultType=xml';<br /> <br /> $params = array(<br /> 'username' => '{API username}',<br /> 'password' => '{API password}'<br /> );<br /> <br /> $ch = curl_init($url);<br /> curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);<br /> curl_setopt($ch, CURLOPT_USERPWD, $params['username'].':'.$params['password']);<br /> $result = curl_exec($ch);<br /> <br /> echo htmlspecialchars($result);</pre><br /></div>
        </div>
    </body>
</html>
